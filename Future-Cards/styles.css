/* =====================================================
   MENSAJES DE TURNO
===================================================== */
.turn-message {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(220, 38, 127, 0.95);
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    border: 2px solid #ff6b6b;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    font-size: 14px;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
}

.turn-message.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* =====================================================
   ESTILOS GENERALES
===================================================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Courier New', monospace;
    overflow: hidden;
    background-color: #1a1a2e;
    color: #eee;
}

/* =====================================================
   PANTALLAS GENERALES
===================================================== */
.screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: none;
    transition: opacity 0.5s ease-in-out;
}

.screen.active {
    display: flex;
    opacity: 1;
}

/* =====================================================
   FASE 1: PANTALLA HOME
===================================================== */
.home-background {
    width: 100%;
    height: 100%;
    background-image: url('img/Home.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    position: relative;
    padding: 40px 20px;
}

.home-main-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.game-title {
    font-size: 4rem;
    color: #fff;
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
    margin-bottom: 20px;
    font-family: 'Courier New', monospace;
    animation: titleGlow 3s ease-in-out infinite alternate;
}

.game-subtitle {
    font-size: 1.5rem;
    color: #ddd;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    margin-bottom: 40px;
    max-width: 600px;
    line-height: 1.4;
}

@keyframes titleGlow {
    0% { text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 20px rgba(116, 185, 255, 0.3); }
    100% { text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 30px rgba(116, 185, 255, 0.6); }
}

.menu-buttons {
    display: flex;
    gap: 30px;
    align-items: center;
    justify-content: center;
    margin-bottom: 40px;
}

.menu-button {
    background: none;
    border: none;
    cursor: pointer;
    transition: transform 0.2s ease, filter 0.2s ease;
    padding: 0;
}

.menu-button:hover {
    transform: scale(1.1);
    filter: brightness(1.2);
}

.menu-button:active {
    transform: scale(0.95);
}

.menu-button img {
    width: 120px;
    height: auto;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
}

/* =====================================================
   MODAL DE SELECCIÓN DE MODO
===================================================== */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: opacity 0.3s ease;
}

.modal.hidden {
    display: none;
}

.modal-content {
    background: linear-gradient(135deg, #2d3436, #636e72);
    border: 3px solid #ddd;
    border-radius: 10px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    max-width: 500px;
    width: 90%;
}

.modal-content h2 {
    margin-bottom: 25px;
    color: #fff;
    font-size: 24px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.mode-buttons {
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
    justify-content: center;
}

.mode-button {
    background: linear-gradient(135deg, #74b9ff, #0984e3);
    border: 2px solid #fff;
    border-radius: 8px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    color: white;
    min-width: 150px;
}

.mode-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.mode-button span {
    font-size: 30px;
    display: block;
    margin-bottom: 10px;
}

.mode-button p {
    font-weight: bold;
    margin-bottom: 5px;
}

.mode-button small {
    font-size: 12px;
    opacity: 0.9;
}

.shuffle-options {
    border-top: 1px solid #ddd;
    padding-top: 20px;
}

.shuffle-options h3 {
    margin-bottom: 15px;
    color: #fff;
}

.shuffle-options label {
    display: block;
    margin-bottom: 10px;
    cursor: pointer;
    color: #fff;
}

.shuffle-options input[type="radio"] {
    margin-right: 10px;
}

/* =====================================================
   FASE 2: PANTALLA DEL JUEGO
===================================================== */
.game-background {
    width: 100%;
    height: 100%;
    background-image: url('img/Board.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
}

.game-ui {
    position: absolute;
    top: 20px;
    left: 20px;
    right: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 100;
}

.ui-button {
    background: none;
    border: none;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.ui-button:hover {
    transform: scale(1.1);
}

.ui-button img {
    width: 60px;
    height: auto;
    image-rendering: pixelated;
}

.game-info {
    display: flex;
    flex-direction: column;
    gap: 5px;
    background: rgba(0, 0, 0, 0.7);
    padding: 10px 15px;
    border-radius: 8px;
    border: 2px solid #fff;
}

.game-info span {
    color: #fff;
    font-size: 14px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

/* =====================================================
   TABLERO DE CARTAS
===================================================== */
.board-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 800px;
    height: 600px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 20px;
    padding: 40px;
}

/* =====================================================
   POSICIONAMIENTO MEJORADO DE CARTAS
===================================================== */

.card-position {
    position: relative;
    background: rgba(0, 0, 0, 0.3);
    border: 2px dashed #fff;
    border-radius: 10px;
    display: flex;
    align-items: stretch;
    justify-content: space-between;
    min-height: 120px;
    max-height: 120px;
    width: 100%;
    transition: all 0.3s ease;
    overflow: hidden; /* 📦 Evitar que las cartas se salgan */
    padding: 4px; /* 📏 Margen interno para las pilas */
}

.card-position:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: #74b9ff;
}

.card-position.highlight {
    border-color: #00b894;
    background: rgba(0, 184, 148, 0.2);
    box-shadow: 0 0 20px rgba(0, 184, 148, 0.5);
}

.card-position.full {
    border-color: #e17055;
    background: rgba(225, 112, 85, 0.2);
    opacity: 0.6;
}

.card-position.full:hover {
    background: rgba(225, 112, 85, 0.3);
    border-color: #e17055;
}

.card-position.current-position {
    border-color: #74b9ff;
    background: rgba(116, 185, 255, 0.2);
    box-shadow: 0 0 25px rgba(116, 185, 255, 0.6);
    animation: currentPositionPulse 2s ease-in-out infinite;
}

@keyframes currentPositionPulse {
    0%, 100% { 
        box-shadow: 0 0 25px rgba(116, 185, 255, 0.6);
        border-color: #74b9ff;
    }
    50% { 
        box-shadow: 0 0 35px rgba(116, 185, 255, 0.9);
        border-color: #0984e3;
    }
}

.position-label {
    position: absolute;
    top: -10px;
    left: 10px;
    background: #2d3436;
    color: #fff;
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    font-size: 14px;
    border: 1px solid #fff;
    z-index: 10;
}

/* =====================================================
   PILAS DE CARTAS MEJORADAS - EFECTO DE APILAMIENTO REAL
===================================================== */

.face-down-stack, .face-up-stack {
    width: 48%; /* 📏 Usar 48% para dejar espacio entre pilas */
    height: 100%;
    position: relative;
    display: flex;
    align-items: flex-start; /* 📦 Alinear desde arriba */
    justify-content: center;
    flex-direction: column; /* 📦 Apilar verticalmente */
    border-radius: 8px;
    min-height: 100px;
    max-height: 110px; /* 📏 Altura máxima para contener cartas */
    overflow: visible; /* 🎨 Permitir el efecto de apilamiento */
    margin: 2px; /* 📏 Separación entre pilas */
    padding: 4px; /* 📏 Espacio interno */
}

.face-down-stack {
    background: rgba(100, 100, 100, 0.3);
    border: 2px solid rgba(150, 150, 150, 0.5);
    border-right: 1px solid rgba(255, 255, 255, 0.3);
}

.face-down-stack .card {
    opacity: 0.9;
    position: absolute; /* 🎨 Posicionamiento absoluto para apilamiento */
    top: 4px; /* 📦 Posición base desde arriba */
    left: 50%;
    transform: translateX(-50%); /* 📦 Centrar horizontalmente */
    max-width: 90%; /* 📦 No exceder el ancho del contenedor */
    box-sizing: border-box;
}

.face-up-stack {
    background: rgba(50, 150, 50, 0.2);
    border: 2px solid rgba(100, 200, 100, 0.5);
}

.face-up-stack .card {
    opacity: 1;
    position: absolute; /* 🎨 Posicionamiento absoluto para apilamiento */
    top: 4px; /* 📦 Posición base desde arriba */
    left: 50%;
    transform: translateX(-50%); /* 📦 Centrar horizontalmente */
    max-width: 90%; /* 📦 No exceder el ancho del contenedor */
    box-sizing: border-box;
}

/* 🎨 EFECTO DE APILAMIENTO ESCALONADO CON LIGERO DESPLAZAMIENTO */
.face-down-stack .card:nth-child(1) {
    top: 4px;
    left: 48%; /* 🎨 Ligero desplazamiento a la izquierda */
    z-index: 1;
}

.face-down-stack .card:nth-child(2) {
    top: 6px;
    left: 50%; /* 🎨 Centrado */
    z-index: 2;
}

.face-down-stack .card:nth-child(3) {
    top: 8px;
    left: 52%; /* 🎨 Ligero desplazamiento a la derecha */
    z-index: 3;
}

.face-down-stack .card:nth-child(4) {
    top: 10px;
    left: 50%; /* 🎨 Centrado nuevamente */
    z-index: 4;
}

.face-up-stack .card:nth-child(1) {
    top: 4px;
    left: 48%; /* 🎨 Ligero desplazamiento a la izquierda */
    z-index: 1;
}

.face-up-stack .card:nth-child(2) {
    top: 6px;
    left: 50%; /* 🎨 Centrado */
    z-index: 2;
}

.face-up-stack .card:nth-child(3) {
    top: 8px;
    left: 52%; /* 🎨 Ligero desplazamiento a la derecha */
    z-index: 3;
}

.face-up-stack .card:nth-child(4) {
    top: 10px;
    left: 50%; /* 🎨 Centrado nuevamente */
    z-index: 4;
}

/* 🎨 CARTA SUPERIOR SIEMPRE VISIBLE Y CLICKEABLE */
.face-down-stack .card:last-child,
.face-up-stack .card:last-child {
    z-index: 10; /* 🎨 Carta superior siempre encima */
    box-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5); /* 🎨 Sombra más pronunciada para la carta superior */
}

/* Indicador visual cuando una pila está vacía */
.face-down-stack:empty::before {
    content: "Boca Abajo";
    color: rgba(255, 255, 255, 0.5);
    font-size: 9px;
    text-align: center;
    padding: 8px 4px;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    box-sizing: border-box;
}

.face-up-stack:empty::before {
    content: "Boca Arriba";
    color: rgba(255, 255, 255, 0.5);
    font-size: 9px;
    text-align: center;
    padding: 8px 4px;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    box-sizing: border-box;
}

/* 📊 INDICADOR DE CANTIDAD DE CARTAS */
.face-down-stack::after,
.face-up-stack::after {
    content: attr(data-count);
    position: absolute;
    top: -8px;
    right: -8px;
    background: #ff6b6b;
    color: white;
    font-size: 10px;
    font-weight: bold;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.face-down-stack:empty::after,
.face-up-stack:empty::after {
    display: none; /* 🚫 Ocultar contador cuando está vacío */
}

/* Posicionamiento específico del tablero */
.top-row:nth-child(1) { grid-column: 1; grid-row: 1; }
.top-row:nth-child(2) { grid-column: 2; grid-row: 1; }
.top-row:nth-child(3) { grid-column: 3; grid-row: 1; }
.top-row:nth-child(4) { grid-column: 4; grid-row: 1; }

.middle-row.left:nth-child(5) { grid-column: 1; grid-row: 2; }
.middle-row.center { grid-column: 2/4; grid-row: 2; }
.middle-row.right:nth-child(7) { grid-column: 4; grid-row: 2; }

.middle-row.left:nth-child(8) { grid-column: 1; grid-row: 3; }
.middle-row.right:nth-child(9) { grid-column: 4; grid-row: 3; }

.bottom-row:nth-child(10) { grid-column: 1; grid-row: 4; }
.bottom-row:nth-child(11) { grid-column: 2; grid-row: 4; }
.bottom-row:nth-child(12) { grid-column: 3; grid-row: 4; }
.bottom-row:nth-child(13) { grid-column: 4; grid-row: 4; }

/* =====================================================
   CARTAS MEJORADAS - EFECTO DE APILAMIENTO PERFECTO
===================================================== */
.card {
    width: 80%; /* 📦 80% del ancho del contenedor para apilamiento perfecto */
    max-width: 45px; /* 📏 Tamaño máximo controlado para apilar */
    height: 60px; /* 📏 Altura proporcional para el apilamiento */
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 6px;
    border: 1px solid #333;
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4); /* 🎨 Sombra más pronunciada para apilamiento */
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    box-sizing: border-box;
}

.card:last-child {
    z-index: 10; /* 🎨 Última carta siempre visible */
}

.card.top-card {
    z-index: 15; /* 🎨 Carta superior con máxima prioridad */
}

.card img {
    width: 100%;
    height: 100%;
    border-radius: 6px;
    image-rendering: pixelated;
    object-fit: cover; /* 📦 Mantener proporción sin deformar */
}

.card:hover {
    transform: scale(1.15) translateY(-3px); /* 🎨 Efecto hover adaptado al apilamiento */
    z-index: 50;
    box-shadow: 0 5px 12px rgba(0, 0, 0, 0.6); /* 🎨 Sombra más intensa en hover */
}

.card.face-down {
    background-image: url('img/cards/Backcard.png');
    background-size: cover;
    background-position: center;
}

.card.face-up {
    cursor: grab;
}

.card.face-up:active {
    cursor: grabbing;
}

.card.dragging {
    z-index: 100;
    transform: scale(1.1) rotate(5deg);
    opacity: 0.9;
    cursor: grabbing !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
    transition: none; /* Eliminar transiciones durante el drag */
}

/* Cursor para cartas arrastrables */
.card.face-up {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card.face-up:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
}

/* Cartas no arrastrables (boca abajo) */
.card.face-down {
    cursor: default;
    opacity: 0.9;
}

/* Cartas voladoras para animación de distribución */
.flying-card {
    width: 60px;
    height: 84px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    pointer-events: none;
}

.flying-card img {
    width: 100%;
    height: 100%;
    border-radius: 8px;
    image-rendering: pixelated;
}

/* Mejoras visuales para las pilas */
.face-down-stack {
    background: linear-gradient(145deg, #2a2a3e, #1a1a2e);
    border: 2px solid #333;
    border-radius: 10px;
    min-height: 100px;
    min-width: 70px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.face-down-stack:empty::before {
    content: "🂠";
    font-size: 2em;
    color: #555;
    opacity: 0.5;
}

.face-up-stack {
    background: linear-gradient(145deg, #3e3e2a, #2e2e1a);
    border: 2px dashed #666;
    border-radius: 10px;
    min-height: 100px;
    min-width: 70px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.face-up-stack:empty::before {
    content: "⬜";
    font-size: 2em;
    color: #666;
    opacity: 0.3;
}

/* 🔒 Bloqueo visual para pilas boca abajo */
.face-down-stack.blocked {
    opacity: 0.6;
    cursor: not-allowed;
    background: linear-gradient(145deg, #4a2a2a, #3a1a1a);
    border-color: #8b4513;
}

.face-down-stack.blocked::after {
    content: "🔒";
    position: absolute;
    top: 5px;
    right: 5px;
    font-size: 1.2em;
    color: #ff6b6b;
}

/* Highlighting para zonas de drop válidas */
.card-position.highlighted {
    background-color: rgba(128, 255, 128, 0.3);
    border: 3px solid #00ff00;
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
    animation: highlight-pulse 1s ease-in-out infinite alternate;
    transform: scale(1.02);
}

.face-up-stack.drop-target {
    background-color: rgba(128, 255, 128, 0.4);
    border: 2px dashed #00ff00;
    border-radius: 8px;
}

@keyframes highlight-pulse {
    from { 
        background-color: rgba(128, 255, 128, 0.2);
        box-shadow: 0 0 15px rgba(0, 255, 0, 0.4);
    }
    to { 
        background-color: rgba(128, 255, 128, 0.5);
        box-shadow: 0 0 25px rgba(0, 255, 0, 0.8);
    }
}

.card-position.drag-over-valid {
    background-color: rgba(0, 255, 0, 0.5);
    border: 3px solid #00ff00;
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.7);
}

.card-position.drag-over-invalid {
    background-color: rgba(255, 0, 0, 0.5);
    border: 3px solid #ff0000;
    transform: scale(0.95);
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
}

/* Animación de rechazo para drops inválidos */
@keyframes invalid-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.invalid-drop-shake {
    animation: invalid-shake 0.6s ease-in-out 3;
    background-color: rgba(255, 0, 0, 0.3) !important;
    border-color: #ff0000 !important;
}

.card.flipping {
    animation: cardFlip 0.6s ease-in-out;
}

@keyframes cardFlip {
    0% { transform: rotateY(0deg); }
    50% { transform: rotateY(90deg); }
    100% { transform: rotateY(0deg); }
}

.card.moving {
    animation: cardMove 1.2s ease-in-out;
    z-index: 200;
}

@keyframes cardMove {
    0% { 
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    }
    25% { 
        transform: scale(1.3) translateY(-30px) rotate(5deg);
        box-shadow: 0 10px 25px rgba(116, 185, 255, 0.4);
    }
    75% { 
        transform: scale(1.2) translateY(-10px) rotate(-2deg);
        box-shadow: 0 8px 20px rgba(116, 185, 255, 0.3);
    }
    100% { 
        transform: scale(1);
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
    }
}

/* =====================================================
   ANIMACIONES DE BARAJADO
===================================================== */
.shuffle-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: opacity 0.5s ease;
}

.shuffle-overlay.hidden {
    display: none;
}

.shuffle-content {
    text-align: center;
    color: #fff;
}

.shuffle-content h2 {
    font-size: 2.5rem;
    margin-bottom: 30px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    animation: pulse 2s infinite;
}

.shuffle-cards {
    position: relative;
    width: 300px;
    height: 200px;
    margin: 0 auto 30px;
}

.flying-card {
    position: absolute;
    width: 60px;
    height: 84px;
    background-image: url('img/cards/Backcard.png');
    background-size: cover;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

.flying-card.card-1 {
    animation: flyCard1 2s infinite ease-in-out;
}

.flying-card.card-2 {
    animation: flyCard2 2.2s infinite ease-in-out;
    animation-delay: 0.2s;
}

.flying-card.card-3 {
    animation: flyCard3 2.4s infinite ease-in-out;
    animation-delay: 0.4s;
}

.flying-card.card-4 {
    animation: flyCard4 2.1s infinite ease-in-out;
    animation-delay: 0.1s;
}

.flying-card.card-5 {
    animation: flyCard5 2.3s infinite ease-in-out;
    animation-delay: 0.3s;
}

@keyframes flyCard1 {
    0%, 100% { transform: translate(120px, 60px) rotate(0deg); }
    25% { transform: translate(50px, 20px) rotate(15deg); }
    50% { transform: translate(180px, 40px) rotate(-10deg); }
    75% { transform: translate(90px, 80px) rotate(5deg); }
}

@keyframes flyCard2 {
    0%, 100% { transform: translate(80px, 40px) rotate(5deg); }
    25% { transform: translate(200px, 70px) rotate(-15deg); }
    50% { transform: translate(30px, 30px) rotate(20deg); }
    75% { transform: translate(160px, 90px) rotate(-5deg); }
}

@keyframes flyCard3 {
    0%, 100% { transform: translate(150px, 80px) rotate(-10deg); }
    25% { transform: translate(40px, 50px) rotate(25deg); }
    50% { transform: translate(190px, 20px) rotate(-20deg); }
    75% { transform: translate(110px, 70px) rotate(10deg); }
}

@keyframes flyCard4 {
    0%, 100% { transform: translate(60px, 70px) rotate(15deg); }
    25% { transform: translate(170px, 30px) rotate(-25deg); }
    50% { transform: translate(100px, 90px) rotate(30deg); }
    75% { transform: translate(200px, 60px) rotate(-15deg); }
}

@keyframes flyCard5 {
    0%, 100% { transform: translate(140px, 50px) rotate(-5deg); }
    25% { transform: translate(70px, 90px) rotate(20deg); }
    50% { transform: translate(210px, 80px) rotate(-30deg); }
    75% { transform: translate(130px, 30px) rotate(15deg); }
}

.shuffle-progress {
    width: 300px;
    height: 8px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    overflow: hidden;
    margin: 0 auto;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #74b9ff, #0984e3);
    border-radius: 4px;
    animation: progressFill 3s ease-in-out;
}

@keyframes progressFill {
    0% { width: 0%; }
    100% { width: 100%; }
}

/* =====================================================
   ANIMACIONES DE REPARTO
===================================================== */
.card.dealing {
    animation: dealCard 0.8s ease-out;
    z-index: 150;
}

@keyframes dealCard {
    0% {
        transform: translate(-50vw, -50vh) rotate(180deg) scale(0.5);
        opacity: 0;
    }
    50% {
        transform: translate(-25vw, -25vh) rotate(90deg) scale(0.8);
        opacity: 0.7;
    }
    100% {
        transform: translate(0, 0) rotate(0deg) scale(1);
        opacity: 1;
    }
}
.game-controls {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 20px;
}

.control-button {
    background: linear-gradient(135deg, #00b894, #00a085);
    border: 2px solid #fff;
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-family: 'Courier New', monospace;
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.control-button:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.control-button:disabled {
    background: linear-gradient(135deg, #636e72, #2d3436);
    cursor: not-allowed;
    opacity: 0.6;
}

/* =====================================================
   FASE 4: PANTALLA DE RESULTADOS
===================================================== */
.result-background {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #2d3436, #636e72);
    display: flex;
    align-items: center;
    justify-content: center;
}

.result-content {
    text-align: center;
    background: rgba(255, 255, 255, 0.1);
    padding: 50px;
    border-radius: 20px;
    border: 3px solid #fff;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
}

#result-title {
    font-size: 48px;
    margin-bottom: 30px;
    color: #fff;
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
}

.result-answer {
    font-size: 120px;
    font-weight: bold;
    margin: 30px 0;
    text-shadow: 5px 5px 10px rgba(0, 0, 0, 0.8);
    animation: pulse 2s infinite;
}

.result-answer.yes {
    color: #00b894;
}

.result-answer.no {
    color: #e17055;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.result-description {
    font-size: 20px;
    margin-bottom: 40px;
    color: #ddd;
    max-width: 400px;
    line-height: 1.5;
}

.result-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
}

.result-button {
    background: linear-gradient(135deg, #74b9ff, #0984e3);
    border: 2px solid #fff;
    color: white;
    padding: 15px 25px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-family: 'Courier New', monospace;
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.result-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

/* =====================================================
   RESPONSIVE DESIGN
===================================================== */
@media (max-width: 1024px) {
    .board-container {
        width: 90vw;
        height: 70vh;
        padding: 20px;
    }
    
    .card {
        width: 50px;
        height: 70px;
    }
    
    .modal-content {
        padding: 20px;
    }
    
    .mode-buttons {
        flex-direction: column;
    }
    
    .game-title {
        font-size: 3rem;
    }
    
    .game-subtitle {
        font-size: 1.2rem;
    }
}

@media (max-width: 768px) {
    .menu-button img {
        width: 80px;
    }
    
    .board-container {
        gap: 10px;
        padding: 10px;
    }
    
    .card {
        width: 40px;
        height: 56px;
    }
    
    .game-controls {
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    
    .control-button {
        padding: 10px 15px;
        font-size: 14px;
    }
    
    #result-title {
        font-size: 36px;
    }
    
    .result-answer {
        font-size: 80px;
    }
    
    .game-title {
        font-size: 2.5rem;
    }
    
    .game-subtitle {
        font-size: 1rem;
    }
    
    .menu-buttons {
        gap: 20px;
    }
    
    .shuffle-content h2 {
        font-size: 2rem;
    }
    
    .shuffle-cards {
        width: 250px;
        height: 150px;
    }
    
    .flying-card {
        width: 45px;
        height: 63px;
    }
}

/* Modal de Game Over */
#game-over-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

#game-over-modal.hidden {
    display: none;
}

#game-over-modal .modal-content {
    background: linear-gradient(145deg, #1a1a2e, #16213e);
    border: 4px solid #0f3460;
    border-radius: 15px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
    max-width: 400px;
    width: 90%;
}

#game-over-modal h2 {
    color: #ff6b6b;
    font-size: 2.5em;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
}

#game-over-modal p {
    color: #ffffff;
    font-size: 1.2em;
    margin-bottom: 30px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
}

.game-over-buttons {
    display: flex;
    justify-content: space-around;
    gap: 20px;
    flex-wrap: wrap;
}

.game-over-buttons .mode-button {
    background: linear-gradient(145deg, #4ecdc4, #44a08d);
    border: 3px solid #0f3460;
    border-radius: 10px;
    padding: 15px 20px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Courier New', monospace;
    font-weight: bold;
    min-width: 120px;
}

.game-over-buttons .mode-button:hover {
    background: linear-gradient(145deg, #5fd6cc, #4fb3a3);
    transform: translateY(-2px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
}

.game-over-buttons .mode-button span {
    font-size: 1.5em;
    display: block;
    margin-bottom: 5px;
}

.game-over-buttons .mode-button p {
    margin: 0;
    font-size: 0.9em;
    color: white;
}
